{% extends 'admin/base.html' %}
{% block content %}

<div class="container center-block clearfix">
	<h3>Edit Point</h3>

	<div id="map" style="width:500px; height:500px;"></div>
</div>

{% endblock %}
{% block scripts %}
{{super()}}
<script>

	$(document).ready(function(){
    var markers = [];
    {% for point in submission.points %}
      var marker = new L.Marker([{{ point.latitude }}, {{ point.longitude }}])
      markers.push(marker);
    {% endfor %}

		var map = L.map('map').setView([48.11, 11.0], 5);
		L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
			maxZoom: 18
		}).addTo(map);

		// Initialise the FeatureGroup to store editable layers
		var drawnItems = new L.FeatureGroup();
		map.addLayer(drawnItems);
    for(var i = 0; i < markers.length; i++){
      drawnItems.addLayer(markers[i]);
    }

		// Initialise the draw control and pass it the FeatureGroup of editable layers
		var drawControl = new L.Control.Draw({
			edit: {
				featureGroup: drawnItems,
				remove: false
						    
			},
			draw: {
				polyline: false,
				polygon: false,
				circle: false,
				rectangle: false,
				marker: false,
			},
		});
		map.addControl(drawControl);
	});
</script>
{% endblock %}
